<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–∞–∫—Ç–∏–∫–∏ –ú–ì–ö–°</title>
    <style>
        :root {
            --neon-orange: #ff6600;
            --glass-bg: rgba(255, 255, 255, 0.1);
            --dark-bg: #121212;
        }

     body {
    background: 
        /* –¢–æ–Ω–∫–∏–µ –ª–∏–Ω–∏–∏ –ø–æ–¥ 45 –≥—Ä–∞–¥—É—Å–æ–≤ */
        linear-gradient(45deg, transparent 49.5%, rgba(80, 70, 51, 0.4) 10%, transparent 50.5%),
        /* –¢–æ–Ω–∫–∏–µ –ª–∏–Ω–∏–∏ –ø–æ–¥ -45 –≥—Ä–∞–¥—É—Å–æ–≤ */
        linear-gradient(-45deg, transparent 49.5%, rgba(109, 104, 94, 0.4) 10%, transparent 50.5%),
        /* –¢–≤–æ–π –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ñ–æ–Ω */
        radial-gradient(circle at center, #2c2c2c, #000000);

    /* –†–∞–∑–º–µ—Ä —Ä–æ–º–±–æ–≤ (–º–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å) */
    background-size: 50px 50px, 50px 50px, 100% 100%;
    
    color: white;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    margin: 0;
    overflow-x: hidden;
}

/* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –¥–∞–µ—Ç –≥–∏—Ñ–∫–µ –≤–ª–∏—è—Ç—å –Ω–∞ —Ü–µ–Ω—Ç—Ä–æ–≤–∫—É –±–ª–æ–∫–æ–≤ */
.gif-side-container {
    position: fixed;
    left: 20px; /* –û—Ç—Å—Ç—É–ø –æ—Ç –ª–µ–≤–æ–≥–æ –∫—Ä–∞—è —ç–∫—Ä–∞–Ω–∞ */
    top: 50%;
    transform: translateY(-50%);
    z-index: 100;
    pointer-events: none; /* –ß—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –∫–ª–∏–∫–∞—Ç—å "—Å–∫–≤–æ–∑—å" –≥–∏—Ñ–∫—É */
}

.main-gif {
    width: 250px; /* –¢–≤–æ–π —Ä–∞–∑–º–µ—Ä */
    height: auto;
    mix-blend-mode: screen;
}

/* –¶–µ–Ω—Ç—Ä–æ–≤–∫–∞ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (–ø—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –≤ body —ç—Ç–æ –µ—Å—Ç—å) */
body {
    display: flex;
    justify-content: center; /* –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ—Ç –∫–∞—Ä—Ç–æ—á–∫—É –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏ */
    align-items: center;     /* –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ—Ç –∫–∞—Ä—Ç–æ—á–∫—É –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ */
    min-height: 100vh;
    margin: 0;
}

/* –ê–¥–∞–ø—Ç–∞—Ü–∏—è: –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞—Ö –≥–∏—Ñ–∫–∞ —É—Ö–æ–¥–∏—Ç –Ω–∞–≤–µ—Ä—Ö, —á—Ç–æ–±—ã –Ω–µ –º–µ—à–∞—Ç—å —Ü–µ–Ω—Ç—Ä—É */
@media (max-width: 1100px) {
    .gif-side-container {
        position: relative;
        left: 0;
        top: 0;
        transform: none;
        margin-bottom: -80px; /* –ü—Ä–∏–∂–∏–º–∞–µ–º –∫ –∫–∞—Ä—Ç–æ—á–∫–µ —Å–≤–µ—Ä—Ö—É */
        text-align: center;
    }
    .main-gif {
        width: 150px;
    }
}




        .glass-card {
            position: relative;
            background: var(--glass-bg);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 24px;
            padding: 40px;
            width: 90%;
            max-width: 450px;
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.8);
            text-align: center;
            animation: fadeIn 0.8s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        h1 { 
            color: var(--neon-orange); 
            text-shadow: 0 0 15px var(--neon-orange);
            font-size: 1.6rem;
            margin-bottom: 30px;
            letter-spacing: 1px;
            cursor: pointer;
        }

        .hidden { display: none; }

        select, button, input {
            width: 100%;
            padding: 14px;
            margin: 12px 0;
            border-radius: 12px;
            border: none;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 1rem;
            box-sizing: border-box;
            transition: all 0.3s ease;
        }

        input:focus {
            outline: 1px solid var(--neon-orange);
            background: rgba(255, 255, 255, 0.15);
        }

        select option { background: #333; }

        button {
            border: 1px solid var(--neon-orange);
            text-transform: uppercase;
            font-weight: bold;
            cursor: pointer;
        }

        button:hover:not(:disabled) {
            background: var(--neon-orange);
            box-shadow: 0 0 20px var(--neon-orange);
            transform: scale(1.02);
        }

        button:disabled {
            opacity: 0.15;
            cursor: not-allowed;
            filter: grayscale(1);
        }

        .status-btn { background: rgba(255, 102, 0, 0.05); }

        .master-table-container {
            width: 95%;
            max-width: 700px;
            max-height: 85vh;
            overflow-y: auto;
        }

        .master-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            font-size: 0.9rem;
        }

        .master-table th {
            position: sticky;
            top: 0;
            background: #1a1a1a;
            padding: 12px;
            border-bottom: 2px solid var(--neon-orange);
        }

        .master-table td {
            padding: 12px;
            border-bottom: 1px solid rgba(255,255,255,0.05);
        }

        #current-status {
            font-weight: bold;
            display: block;
            margin: 10px 0;
            font-size: 1.1rem;
            color: var(--neon-orange);
        }

        #lock-msg {
            margin-top: 15px;
            font-size: 0.75rem;
            color: #ffaa77;
            background: rgba(255, 102, 0, 0.1);
            padding: 10px;
            border-radius: 10px;
        }
/* –ë–ª–æ–∫ —Å–æ—Ü—Å–µ—Ç–µ–π */
.social-box {
    position: absolute;
    top: 20px;
    right: 20px;

    width: 100px;
    height: 60px;

    display: flex;
    justify-content: center;
    align-items: center;
    gap: 12px;

    background: rgba(255, 255, 255, 0.05);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 12px;
}

.social-box svg {
    width: 22px;
    height: 22px;
    fill: rgba(255, 255, 255, 0.7);
    transition: 0.3s;
}

.social-box a:hover svg {
    fill: var(--neon-orange);
    transform: scale(1.15);
}

.social-link svg {
    width: 28px;
    height: 28px;
    fill: rgba(255, 255, 255, 0.6); /* –¶–≤–µ—Ç –∏–∫–æ–Ω–æ–∫ */
    transition: all 0.3s ease;
}

.social-link:hover svg {
    fill: var(--neon-orange); /* –û—Ä–∞–Ω–∂–µ–≤—ã–π –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
    filter: drop-shadow(0 0 8px var(--neon-orange));
    transform: translateY(-3px);
}

        
    </style>
</head>
<body>
    
    <body>
    <!-- –ü—Ä–æ—Å—Ç–æ —Ç–µ–≥ –±–µ–∑ –æ–±–µ—Ä—Ç–æ–∫, —á—Ç–æ–±—ã —Å—Ç–∏–ª–∏ —Ç–æ—á–Ω–æ —Å—Ä–∞–±–æ—Ç–∞–ª–∏ -->
    <img src="https://i.gifer.com/bfR.gif" class="main-gif">
</body>

    


    
    <div class="social-box">
    <a href="https://www.tiktok.com/@college_stroiteley" target="_blank" class="social-link">
        <svg viewBox="0 0 448 512">
            <path d="M448,209.91a210.06,210.06,0,0,1-122.77-39.25V349.38A162.55,162.55,0,1,1,185,188.31V278.2a74.62,74.62,0,1,0,52.23,71.18V0l88,0a121.18,121.18,0,0,0,1.86,22.17h0A122.18,122.18,0,0,0,381,102.39a121.43,121.43,0,0,0,67,20.14Z"/>
        </svg>
    </a>

    <a href="https://t.me/mozyrskiylitseistroitelei" target="_blank" class="social-link">
        <svg viewBox="0 0 496 512">
            <path d="M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm121.8 169.9l-40.7 191.8c-3 13.6-11.1 16.9-22.4 10.5l-62-45.7-29.9 28.8c-3.3 3.3-6.1 6.1-12.5 6.1l4.4-63.1 114.9-103.8c5-4.4-1.1-6.9-7.7-2.5l-142 89.4-61.2-19.1c-13.3-4.2-13.6-13.3 2.8-19.7l239.1-92.2c11.1-4 20.8 2.7 17.2 19.5z"/>
        </svg>
    </a>
</div>

    <!-- –≠–ö–†–ê–ù 1: –ê–í–¢–û–†–ò–ó–ê–¶–ò–Ø -->
    <div id="auth-screen" class="glass-card">
        <h1 onclick="openPassScreen('master')">–ü–†–ê–ö–¢–ò–ö–ê 2026<br>–û–°–†-331</h1>
        <select id="user-select">
            <option value="" disabled selected>–ö–∞–∫ –≤–∞—Å –∑–æ–≤—É—Ç?</option>
            <option value="–ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤ –ê–ª–µ–∫—Å">–ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤ –ê–ª–µ–∫—Å</option>
            <option value="–ë–æ—Ä–∏—Å–æ–≤ –ë–æ—Ä–∏—Å">–ë–æ—Ä–∏—Å–æ–≤ –ë–æ—Ä–∏—Å</option>
            <option value="–í–∏–∫—Ç–æ—Ä–æ–≤ –í–∏–∫—Ç–æ—Ä">–í–∏–∫—Ç–æ—Ä–æ–≤ –í–∏–∫—Ç–æ—Ä</option>
        </select>
        <button onclick="login()">–í–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É</button>
    </div>
    <!-- –≠–ö–†–ê–ù 2: –ü–£–õ–¨–¢ –°–¢–£–î–ï–ù–¢–ê -->
    <div id="student-screen" class="glass-card hidden">
        <h2 id="welcome-msg">–ü—Ä–∏–≤–µ—Ç!</h2>
        <p>–í–∞—à —Å—Ç–∞—Ç—É—Å –Ω–∞ —Å–µ–≥–æ–¥–Ω—è:</p>
        <span id="current-status">–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è...</span>
        
        <button class="status-btn" onclick="updateStatus('–ù–∞ —Ä–∞–±–æ—Ç–µ')">üöÄ –ù–∞ —Ä–∞–±–æ—Ç–µ</button>
        <button class="status-btn" onclick="updateStatus('–í –ø—É—Ç–∏')">üöå –í –ø—É—Ç–∏</button>
        <button class="status-btn" onclick="updateStatus('–ù–µ –Ω–∞ —Ä–∞–±–æ—Ç–µ')">üè† –ù–µ –Ω–∞ —Ä–∞–±–æ—Ç–µ</button>
        
        <div id="lock-msg" class="hidden">–í—ã –Ω–∞ —Ä–∞–±–æ—Ç–µ! –°—Ç–∞—Ç—É—Å –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω –¥–æ –∑–∞–≤—Ç—Ä–∞.</div>
        <p style="margin-top: 40px; font-size: 0.6em; opacity: 0.3; cursor: pointer;" onclick="openPassScreen('reset')">–°–±—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</p>
    </div>

    <!-- –≠–ö–†–ê–ù 3: –í–í–û–î –ü–ê–†–û–õ–Ø -->
    <div id="password-screen" class="glass-card hidden">
        <h1 id="pass-title">–î–û–°–¢–£–ü</h1>
        <input type="password" id="master-pass-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å">
        <button onclick="checkPassword()">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>
        <button style="border:none; background:none; font-size:0.8rem; color:grey;" onclick="closePassScreen()">–û—Ç–º–µ–Ω–∞</button>
    </div>

    <!-- –≠–ö–†–ê–ù 4: –ü–ê–ù–ï–õ–¨ –ú–ê–°–¢–ï–†–ê -->
    <div id="master-screen" class="glass-card master-table-container hidden">
        <h1>–ú–û–ù–ò–¢–û–†–ò–ù–ì –ì–†–£–ü–ü–´</h1>
        <table class="master-table">
            <thead>
                <tr><th>–°—Ç—É–¥–µ–Ω—Ç</th><th>–°—Ç–∞—Ç—É—Å</th><th>–î–∞—Ç–∞ –∏ –í—Ä–µ–º—è</th></tr>
            </thead>
            <tbody id="master-list"></tbody>
        </table>
        <button style="margin-top: 20px;" onclick="location.reload()">–í—ã—Ö–æ–¥</button>
    </div>

    <script>
        const API_URL = "https://sheetdb.io/api/v1/t5y05xp1pfs2s"; 
        const MASTER_PASS = "1234"; 
        let currentUser = "";
        let passTarget = ""; // 'master' –∏–ª–∏ 'reset'

        window.onload = function() {
            const savedUser = localStorage.getItem('my_practice_user');
            if (savedUser) {
                currentUser = savedUser;
                showStudentPanel();
            }
        };

        // –§—É–Ω–∫—Ü–∏–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —ç–∫—Ä–∞–Ω–æ–º –ø–∞—Ä–æ–ª—è
        function openPassScreen(target) {
            passTarget = target;
            document.getElementById('auth-screen').classList.add('hidden');
            document.getElementById('student-screen').classList.add('hidden');
            document.getElementById('password-screen').classList.remove('hidden');
            document.getElementById('master-pass-input').value = "";
            document.getElementById('master-pass-input').focus();
        }

        function closePassScreen() {
            document.getElementById('password-screen').classList.add('hidden');
            if (currentUser) {
                document.getElementById('student-screen').classList.remove('hidden');
            } else {
                document.getElementById('auth-screen').classList.remove('hidden');
            }
        }

        function checkPassword() {
            const input = document.getElementById('master-pass-input').value;
            if (input === MASTER_PASS) {
                if (passTarget === 'master') {
                    showMaster();
                } else {
                    localStorage.clear();
                    location.reload();
                }
            } else {
                alert("–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å!");
            }
        }

        async function login() {
            const select = document.getElementById('user-select');
            if(!select.value) return alert("–í—ã–±–µ—Ä–∏—Ç–µ –∏–º—è!");
            currentUser = select.value;
            localStorage.setItem('my_practice_user', currentUser);
            showStudentPanel();
        }

        function checkDailyLock() {
            const lastLockDate = localStorage.getItem('last_lock_date');
            const now = new Date();
            const today = now.toLocaleDateString('ru-RU', {
                day: '2-digit', month: '2-digit', year: 'numeric', timeZone: 'Europe/Minsk'
            });
            
            if (lastLockDate === today) {
                document.querySelectorAll('.status-btn').forEach(b => b.disabled = true);
                document.getElementById('lock-msg').classList.remove('hidden');
                return true;
            }
            return false;
        }

        async function showStudentPanel() {
            document.getElementById('auth-screen').classList.add('hidden');
            document.getElementById('password-screen').classList.add('hidden');
            document.getElementById('student-screen').classList.remove('hidden');
            document.getElementById('welcome-msg').innerText = currentUser;
            const statusLabel = document.getElementById('current-status');
            
            checkDailyLock();

            try {
                const response = await fetch(`${API_URL}/search?name=${encodeURIComponent(currentUser)}`);
                const data = await response.json();
                if (data && data.length > 0) {
                    let cleanTime = data[0].time ? data[0].time.replace("'", "") : "--:--";
                    statusLabel.innerText = `${data[0].status} (${cleanTime})`;
                } else {
                    statusLabel.innerText = "–ï—â—ë –Ω–µ –æ—Ç–º–µ—á–∞–ª—Å—è";
                }
            } catch (e) { statusLabel.innerText = "–û—à–∏–±–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏"; }
        }

        async function updateStatus(newStatus) {
            if (newStatus === '–ù–∞ —Ä–∞–±–æ—Ç–µ') {
                if (!confirm(`–í—ã –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç–µ –ø—Ä–∏–±—ã—Ç–∏–µ?\n–ò–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Å–µ–≥–æ–¥–Ω—è –±—É–¥–µ—Ç –Ω–µ–ª—å–∑—è!`)) return;
            }

            const statusLabel = document.getElementById('current-status');
            statusLabel.innerText = "–û—Ç–ø—Ä–∞–≤–∫–∞...";
            
            const now = new Date();
            const datePart = now.toLocaleDateString('ru-RU', {day:'2-digit', month:'2-digit', timeZone:'Europe/Minsk'});
            const lockDate = now.toLocaleDateString('ru-RU', {day:'2-digit', month:'2-digit', year:'numeric', timeZone:'Europe/Minsk'});
            const timePart = now.toLocaleTimeString('ru-RU', {hour:'2-digit', minute:'2-digit', timeZone:'Europe/Minsk'});
            
            const dateTimeStr = `'${datePart} | ${timePart}`; 

            try {
                const checkRes = await fetch(`${API_URL}/search?name=${encodeURIComponent(currentUser)}`);
                const existingData = await checkRes.json();
                const payload = { "status": newStatus, "time": dateTimeStr };

                if (existingData && existingData.length > 0) {
                    await fetch(`${API_URL}/name/${encodeURIComponent(currentUser)}`, {
                        method: 'PATCH',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ "data": payload })
                    });
                } else {
                    await fetch(API_URL, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ "data": [{ "name": currentUser, ...payload }] })
                    });
                }
                
                if (newStatus === '–ù–∞ —Ä–∞–±–æ—Ç–µ') {
                    localStorage.setItem('last_lock_date', lockDate);
                    checkDailyLock();
                }

                statusLabel.innerText = `${newStatus} (${datePart} | ${timePart})`;
                alert("–°—Ç–∞—Ç—É—Å –æ–±–Ω–æ–≤–ª–µ–Ω!");
            } catch (e) { 
                alert("–û—à–∏–±–∫–∞ —Å–µ—Ç–∏!"); 
                statusLabel.innerText = "–û—à–∏–±–∫–∞"; 
            }
        }

        async function showMaster() {
            document.getElementById('password-screen').classList.add('hidden');
            document.getElementById('master-screen').classList.remove('hidden');
            const list = document.getElementById('master-list');
            list.innerHTML = "<tr><td colspan='3'>–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è...</td></tr>";

            try {
                const response = await fetch(API_URL);
                const data = await response.json();
                list.innerHTML = "";
                data.sort((a,b) => a.name.localeCompare(b.name)).forEach(row => {
                    let cleanTime = row.time ? row.time.replace("'", "") : "‚Äî";
                    list.innerHTML += `<tr><td>${row.name}</td><td style="color:var(--neon-orange); font-weight:bold;">${row.status}</td><td style="font-size:0.8em; opacity:0.7">${cleanTime}</td></tr>`;
                });
            } catch (e) { list.innerHTML = "–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏"; }
        }
    </script>
</body>
</html>
